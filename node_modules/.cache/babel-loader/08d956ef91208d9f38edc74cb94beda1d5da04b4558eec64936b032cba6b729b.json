{"ast":null,"code":"import _slicedToArray from\"/Users/Pajamas/portfolios/tetris/tetris-v1/tetris/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../../css/GameOver.css\";import{useEffect,useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import axios from'axios';import{playSound}from\"../../hooks/tetris/playSound\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GameOver=function GameOver(_ref){var score=_ref.score,restart=_ref.restart,setIsStart=_ref.setIsStart;var isMute=useSelector(function(store){return store.isMute.value;});// Ranking\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRank=_useState2[0],setIsRank=_useState2[1];var inputRef=useRef(null);var badWordListRef=useRef([]);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),inputValue=_useState4[0],setInputValue=_useState4[1];// user가 입력한 이름\nuseEffect(function(){axios.get('/api/badword').then(function(res){badWordListRef.current=res.data.badWords;}).catch(function(err){return console.log(err);});},[badWordListRef]);var checkWord=function checkWord(inputValue){for(var i=0;i<badWordListRef.current.badWord.length;i++){if(inputValue.toLowerCase().indexOf(badWordListRef.current.badWord[i])===-1){continue;}else{return false;}}return true;};// 등록 함수\nvar postTrain=function postTrain(){setIsRank(false);if(checkWord(inputValue)){axios.post('/api/data',{name:inputValue,score:score}).then(function(response){console.log('성공');console.log(\"data: \".concat(response.data));setIsStart();}).catch(function(error){console.log('에러!!!');console.error(error);});}else{alert('부적절한 닉네임 입니다.');}};useEffect(function(){if(inputRef.current){inputRef.current.focus();}},[isRank]);var handleInputChange=function handleInputChange(e){setInputValue(e.target.value);};var onClickSave=function onClickSave(){setIsRank(true);playSound('/sound/click.mp3',0.2);};useEffect(function(){if(!isMute){playSound('/sound/gameOver.wav',0.2);// game over sound\n}},[isMute]);return/*#__PURE__*/_jsxs(\"div\",{className:\"gameover-modal\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Game Over\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"score :\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:score})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gameover-modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:restart,children:\"Play Again\"}),/*#__PURE__*/_jsx(\"button\",{onClick:setIsStart,children:\"Main Menu\"}),score===0?null:!isRank?/*#__PURE__*/_jsx(\"button\",{onClick:onClickSave,children:\"Save Score\"}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:postTrain,className:\"input_form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,onChange:handleInputChange,ref:inputRef}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]})]})]});};export default GameOver;","map":{"version":3,"names":["useEffect","useRef","useState","useSelector","axios","playSound","jsx","_jsx","jsxs","_jsxs","GameOver","_ref","score","restart","setIsStart","isMute","store","value","_useState","_useState2","_slicedToArray","isRank","setIsRank","inputRef","badWordListRef","_useState3","_useState4","inputValue","setInputValue","get","then","res","current","data","badWords","catch","err","console","log","checkWord","i","badWord","length","toLowerCase","indexOf","postTrain","post","name","response","concat","error","alert","focus","handleInputChange","e","target","onClickSave","className","children","onClick","onSubmit","type","required","onChange","ref"],"sources":["/Users/Pajamas/portfolios/tetris/tetris-v1/tetris/src/components/Tetris/GameOver.js"],"sourcesContent":["import \"../../css/GameOver.css\"\n\nimport { useEffect, useRef, useState } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport axios from 'axios';\n\nimport { playSound } from \"../../hooks/tetris/playSound\";\n\n\nconst GameOver = ({ score, restart, setIsStart }) => {\n\tconst isMute = useSelector((store) => store.isMute.value);\n\t// Ranking\n\tconst [isRank, setIsRank] = useState(false);\n\n\tconst inputRef = useRef(null);\n\tconst badWordListRef = useRef([]);\n\tconst [inputValue, setInputValue] = useState(''); // user가 입력한 이름\n\n\n\tuseEffect(() => {\n\t\taxios.get('/api/badword')\n\t\t\t.then(res => {\n\t\t\t\tbadWordListRef.current = res.data.badWords;\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t}, [badWordListRef])\n\n\tconst checkWord = (inputValue) => {\n\t\tfor (let i = 0; i < badWordListRef.current.badWord.length; i++) {\n\t\t\tif (inputValue.toLowerCase().indexOf(badWordListRef.current.badWord[i]) === -1) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\n\t// 등록 함수\n\tconst postTrain = () => {\n\t\tsetIsRank(false);\n\t\tif (checkWord(inputValue)) {\n\t\t\taxios.post('/api/data', { name: inputValue, score: score })\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log('성공');\n\t\t\t\t\tconsole.log(`data: ${response.data}`);\n\t\t\t\t\tsetIsStart();\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log('에러!!!');\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t})\n\t\t} else {\n\t\t\talert('부적절한 닉네임 입니다.');\n\t\t}\n\n\t}\n\n\tuseEffect(() => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [isRank]);\n\n\tconst handleInputChange = (e) => {\n\t\tsetInputValue(e.target.value);\n\t}\n\tconst onClickSave = () => {\n\t\tsetIsRank(true);\n\t\tplaySound('/sound/click.mp3', 0.2);\n\t}\n\tuseEffect(() => {\n\t\tif (!isMute) {\n\t\t\tplaySound('/sound/gameOver.wav', 0.2); // game over sound\n\t\t}\n\t}, [isMute]);\n\n\treturn (\n\t\t<div className=\"gameover-modal\">\n\t\t\t<h1>Game Over</h1>\n\n\t\t\t<span>\n\t\t\t\t<span>score :</span> <span>{score}</span>\n\t\t\t</span>\n\n\t\t\t<div className=\"gameover-modal-buttons\">\n\t\t\t\t<button onClick={restart}>Play Again</button>\n\t\t\t\t<button onClick={setIsStart}>Main Menu</button>\n\t\t\t\t{score === 0 ? null :\n\t\t\t\t\t!isRank ? <button onClick={onClickSave}>Save Score</button> : (\n\t\t\t\t\t\t<form onSubmit={postTrain} className=\"input_form\">\n\t\t\t\t\t\t\t<input type=\"text\" required onChange={handleInputChange} ref={inputRef} />\n\t\t\t\t\t\t\t<button type=\"submit\">Save</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default GameOver;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}